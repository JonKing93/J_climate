function[Data2D, ndimSize, dimOrder] = dimNTodim2(Data, varargin)
%% Converts an n-dimensional dataset to a 2D matrix with a dimension of
% choice along the first dimension. Use this function in conjunction with
% the dim2TodimN function.
%
% ----- Inputs -----
%
% Data: An N-dimensional dataset
%
% *** Optional Inputs ***
%
% dim: (Default = 1) The dimension to set along the first dimension of the
%   2D matrix.
%
% ----- Output -----
%
% Data2D: The permuted data, reshaped into a 2D matrix
%
% ndimSize: The sizes of the n-dimensional, permuted dataset
%
% dimOrder: The order 
% Get the number of dimensions in the dataset
d = ndims(Data);
dimOrder = 1:d;

% Permute the data so that the dimension of interest is along the first
% dimension
dimOrder(1) = dim;
dimOrder(dim) = 1;

Data = permute(Data, dimOrder);

% Get the size of the permuted data
ndimSize = size(Data);

% Reshape the data into a 2D matrix
Data2D = reshape(Data, sData(1), prod( ndimSize(2:end)));

